---
// Bootstrap navbar for site navigation
const { isDocs = false } = Astro.props;
const mainNav = [
  { label: 'Dashboard', link: '/dashboard', isDash: true },
  { label: 'Home', link: '/' },
  { label: 'About', link: '/about' },
  { label: 'Services', link: '/services' },
  { label: 'Tests', link: '/testing' },
  { label: 'Blog', link: '/blog' },
  { label: 'Docs', link: '/introduction/how-blue-frog-analytics-works' },
];
const currentPath =
  Astro.url.pathname === '/'
    ? '/'
    : Astro.url.pathname.replace(/\/$/, '').toLowerCase();
function isActive(item) {
  const link = item.link === '/' ? '/' : item.link.replace(/\/$/, '').toLowerCase();

  if (item.label === 'Docs') return isDocs;
  if (item.label === 'Tests') {
    return currentPath.startsWith('/testing') || currentPath.startsWith('/tests');
  }
  if (item.label === 'Blog') return currentPath.startsWith('/blog');
  if (link === '/') return currentPath === '/';
  return currentPath === link || currentPath.startsWith(link + '/');
}
---
<!-- Skip link for accessibility -->
<a href="#main-content" class="visually-hidden-focusable">Skip to main content</a>
<nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top navbar-charcoal" aria-label="Main navigation">
  <div class="container-fluid">
    <a class="navbar-brand site-logo" href="/">
      <span class="site-logo-prefix">BlueFrog</span><span class="site-logo-analytics">Analytics</span>
    </a>
    <span class="nav-separator mx-2 d-none d-lg-inline">|</span>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#mainNav" aria-controls="mainNav" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="mainNav">
      <ul class="navbar-nav mb-2 mb-lg-0 me-auto">
        {mainNav.map(item => (
          <li class={`nav-item${item.isDash ? ' d-none' : ''}`} key={item.link} id={item.isDash ? 'dashboard-nav' : undefined}>
            <a class={`nav-link${isActive(item) ? ' active' : ''}`} href={item.link}>{item.label}</a>
          </li>
        ))}
      </ul>
      <a id="login-btn" class="btn btn-outline-light ms-lg-2" href="/login">Client Login</a>
      <a id="dash-btn" class="btn btn-outline-light ms-lg-2 d-none" href="/dashboard">Profile</a>
    </div>
  </div>
</nav>
<style>
  .site-logo-prefix {
    color: var(--sl-color-primary);
  }
  .site-logo-analytics {
    font-weight: 600;
  }
  .nav-separator {
    color: var(--bs-body-color);
    opacity: 0.65;
  }
  .navbar-charcoal {
    --bs-navbar-color: #36454f;
    --bs-navbar-hover-color: var(--sl-color-primary);
    --bs-navbar-active-color: var(--sl-color-primary);
    --bs-navbar-brand-color: #36454f;
    --bs-navbar-brand-hover-color: var(--sl-color-primary);
  }
</style>
