---
// Bootstrap navbar for site navigation
const { isDocs = false } = Astro.props;
const mainNav = [
  { label: 'Home', link: '/' },
  { label: 'About', link: '/about' },
  { label: 'Services', link: '/services' },
  { label: 'Tests', link: '/testing' },
  { label: 'Blog', link: '/blog' },
  { label: 'Docs', link: '/introduction/how-blue-frog-analytics-works' },
];
const currentPath = Astro.url.pathname.replace(/\/$/, '').toLowerCase();
function isActive(item) {
  let link = item.link.toLowerCase();
  if (link !== '/') {
    link = link.replace(/\/$/, '');
  }
  if (item.label === 'Docs') return isDocs;
  if (item.label === 'Tests') {
    return currentPath.startsWith('/testing') || currentPath.startsWith('/tests');
  }
  if (item.label === 'Blog') return currentPath.startsWith('/blog');
  if (link === '/') return currentPath === '/';
  return currentPath === link || currentPath.startsWith(link + '/');
}
---
<!-- Skip link for accessibility -->
<a href="#main-content" class="visually-hidden-focusable">Skip to main content</a>
<nav class="navbar navbar-expand-lg navbar-light bg-white fixed-top navbar-charcoal" aria-label="Main navigation">
  <div class="container-fluid">
    <button class="navbar-toggler me-2" type="button" data-bs-toggle="collapse" data-bs-target="#mainNav" aria-controls="mainNav" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <a class="navbar-brand site-logo" href="/">
      <span class="site-logo-prefix">BlueFrog</span><span class="site-logo-analytics">Analytics</span>
    </a>
    <span class="nav-separator mx-2 d-none d-lg-inline">|</span>
    <div class="collapse navbar-collapse" id="mainNav">
      <ul class="navbar-nav mb-2 mb-lg-0">
        {mainNav.map(item => (
          <li class="nav-item" key={item.link}>
            <a class={`nav-link${isActive(item) ? ' active' : ''}`} href={item.link}>{item.label}</a>
          </li>
        ))}
      </ul>
    </div>
  </div>
</nav>
<style>
  .site-logo-prefix {
    color: var(--sl-color-primary);
  }
  .site-logo-analytics {
    font-weight: 600;
  }
  .nav-separator {
    color: var(--bs-body-color);
    opacity: 0.65;
  }
  .navbar-charcoal {
    --bs-navbar-color: #36454f;
    --bs-navbar-hover-color: var(--sl-color-primary);
    --bs-navbar-active-color: var(--sl-color-primary);
    --bs-navbar-brand-color: #36454f;
    --bs-navbar-brand-hover-color: var(--sl-color-primary);
  }
</style>
