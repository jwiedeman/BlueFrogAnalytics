---
import DashboardLayout from '../../../components/DashboardLayout.astro';

const title = 'Specification - Dimensions';
const description = 'Dimension reference details.';
---
<DashboardLayout title={title} description={description}>
  <section class="container py-5">
    <h1 class="text-center mb-4">Dimensions</h1>
    <div class="table-responsive">
      <table class="table table-dark table-striped align-middle" id="dims-table">
        <thead>
          <tr>
            <th>Tool</th>
            <th>Name</th>
            <th>Description</th>
            <th>Rule</th>
            <th>Example</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
  </section>
  <script type="module">
    document.addEventListener('DOMContentLoaded', () => {
      const loadData = async () => {
        try {
          const resp = await fetch('/api/specs?category=dimension', { credentials: 'include' });
          if (!resp.ok) return;
          const rows = await resp.json();
          const tbody = document.querySelector('#dims-table tbody');
          rows.forEach(r => {
            const tr = document.createElement('tr');
            tr.innerHTML = `<td>${r.tool}</td><td>${r.name}</td><td>${r.description || ''}</td><td>${r.rule || ''}</td><td>${r.example || ''}</td>`;
            tbody.appendChild(tr);
          });
        } catch {}
      };
      const init = () => {
        window.onAuthStateChanged(window.firebaseAuth, user => {
          if (!user) {
            window.location.href = '/login';
          } else {
            loadData();
          }
        });
      };
      if (window.firebaseAuth) {
        init();
      } else {
        document.addEventListener('firebase-init', init, { once: true });
      }
    });
  </script>
</DashboardLayout>
